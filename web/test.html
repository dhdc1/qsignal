<!DOCTYPE html>
<html>
  <head>
    <title>Signal Test</title>
    <style>
      table {
        background: white;
        display: table;       
        table-layout: fixed;       
      }

      td {
        background: rgb(184, 41, 89);
        display: table-cell;
        height: 100px;
        width: 400px;
        font-weight: bolder;
        font-size: 5em;
        color: white
      }
    </style>
  </head>
  <body>
    <table >
      <tr>
        <td align="center"><div id="A001">A001</div></td>
      </tr>
      <tr>
        <td align="center"><div id="A002">A002</div></td>
      </tr>
      <tr>
        <td align="center"><div id="A003">A003</div></td>
      </tr>
      <tr>
        <td align="center"><div id="A004">A004</div></td>
      </tr>
    </table>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E="
      crossorigin="anonymous"
    ></script>
    <script>
      function blinkX(callback, delay, repetitions) {
        var x = 0;
        var intervalID = window.setInterval(function() {
          callback();

          if (++x === repetitions) {
            window.clearInterval(intervalID);
          }
        }, delay);
      }

      $(function() {
        var socket = io();

        socket.on("scn", function(msg) {
          console.log(msg);
        });

        socket.on("blink", function(q) {
          console.log(q);
          blinkX(
            function() {
              $(`#${q}`).toggle();
            },
            600,
            20
          );
        });
      });
    </script>
  </body>
</html>
